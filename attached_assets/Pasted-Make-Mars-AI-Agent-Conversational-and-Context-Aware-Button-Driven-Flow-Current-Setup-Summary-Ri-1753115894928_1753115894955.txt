Make MarsÂ² AI Agent Conversational and Context-Aware (Button-Driven Flow)
âœ… Current Setup Summary
Right now, the MarsÂ² AI agent â€” powered by @elizaos/plugin-sei â€” outputs non-interactive text suggestions for the user's validator positions:

The suggestions appear (e.g. â€œRHINO is red. Unstake recommended.â€)

Below each suggestion:
[Unstake] [Redelegate] [View Incidents]

But: Clicking the buttons does nothing

ğŸ“ˆ Goal
Upgrade the MarsÂ² AI agent + frontend to be a conversational assistant, where:

Eliza agent remembers validator context per wallet

Clicking on [Unstake], [Redelegate], or [View Incidents] sends a follow-up payload to the agent

The agent responds in plain English with:

What unstaking means + how to do it

Where they could redelegate

A readable report of validator incident history (onchain score events)

ğŸ’¬ Step-by-Step Instructions (for Replit)
âœ… Step 1: Use Elizaâ€™s Stateful Memory or Follow-Up Interface
Instead of having the agent just return recommendations[] as static textâ€¦

Store per-user context in the agent (Eliza supports conversation state out-of-the-box via sessions or plugin memory)

Sample recommendation PER validator:

json
{
  "validator": "RHINO",
  "score": 40,
  "action": "Unstake recommended",
  "buttons": [
    { "label": "Unstake", "callback": "unstake_rhino" },
    { "label": "Redelegate", "callback": "redelegate_rhino" },
    { "label": "View Incidents", "callback": "incidents_rhino" }
  ]
}
Now when a frontend button is clicked (ex: "unstake_rhino"), send that keyword (callback ID) back to the agent for a contextual response.

âœ… Step 2: Handle Button Callbacks in the Agent
Create functions in the Eliza agent to handle each callback:

js
// Handle callback actions from buttons
async function handleCallback(choice) {
  if (choice === "unstake_rhino") {
    return "To unstake from RHINO, open your wallet, navigate to staking, and undelegate from: 0xValidatorHere \n\n Estimated cooldown: 14 days.";
  }
  if (choice === "redelegate_rhino") {
    return "You can choose from these top performing validators:\n\n1. Imperator â€“ 99.9% uptime\n2. FTL Labs â€“ voted in all proposals\n\nUse the wallet 'Redelegate' function to move your stake.";
  }
  if (choice === "incidents_rhino") {
    const events = await getValidatorEvents("0xValidatorHere");
    return `ğŸ“ RHINO Incident History:\n\n- Missed 12 blocks on July 17\n- Score dropped -10 (Community Report)\n- Jailed briefly on July 4\n\nCurrent Status: Score 40 ğŸ”´`;
  }
  return "I didn't understand your request. Please try again.";
}
âœ… Step 3: Make the Frontend Buttons Interactive
Each validator card has buttons:

jsx
<button onClick={() => sendCallback("unstake_rhino")}>Unstake</button>
<button onClick={() => sendCallback("redelegate_rhino")}>Redelegate</button>
<button onClick={() => sendCallback("incidents_rhino")}>View Incidents</button>
Define the callback handler:

js
const sendCallback = async (choiceId) => {
  const res = await fetch("/eliza/callback", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ callback: choiceId })
  });
  const data = await res.json();
  setAgentResponse(data.message);  // display this in chatbot / modal
};
Show agentResponse inside a chatbot UI or info modal.

ğŸ¤ Bonus Step: Make It Fully Conversational (Chat Sidebar)
Add an Eliza-powered chat to the app (simple sidebar window)

User can type:
"Should I unstake from RHINO?"

Agent could respond:

â€œThe validator RHINO is underperforming (score 40, ğŸ”´ Red). Based on staking risk rules, I recommend unstaking to avoid downtime risk.â€

Enable multi-turn:
Store connected wallet address â†’ fetch staking state on load

Let user type â€œwhatâ€™s the safest validator today?â€
â†’ Agent cross-checks MarsÂ² scores and validator stats

Let user ask â€œwhat happened to validator RHINO?â€
â†’ Agent calls MarsÂ² getEvents and returns a summary.

ğŸ¤– Prompt Examples (for UX prompt or testing)
Send these to the agent for testing:

â€œGive me staking advice for my validators.â€

â€œWhatâ€™s going on with RHINO?â€

â€œShould I move funds from FTL?â€

Callback: unstake_rhino

Callback: incidents_rhino

